# 🐍 UV Python Package Manager Guide\n\n> **The fastest Python package manager for Toolhouse development** - 10-100x faster than pip, built in Rust\n\n## 🚀 What is UV?\n\nUV is a modern, high-performance Python package manager and project manager written in Rust. It's designed to replace pip, venv, poetry, pyenv, and other Python tools with a single, blazing-fast solution.\n\n### Why UV for Toolhouse Agents?\n\n- **⚡ Speed**: 10-100x faster than pip/poetry\n- **🔧 All-in-one**: Replaces multiple tools (pip, venv, poetry, pyenv)\n- **🔒 Reliable**: Lock files ensure reproducible environments\n- **🌐 Standards compliant**: Uses pyproject.toml and modern Python standards\n- **🛠️ Perfect for agents**: Ideal for data processing, API integrations, custom logic\n\n## 📦 Installation\n\n### Quick Install (Recommended)\n\n```bash\n# macOS/Linux - Official installer\ncurl -LsSf https://astral.sh/uv/install.sh | sh\n\n# Windows - PowerShell\npowershell -ExecutionPolicy ByPass -c \"irm https://astral.sh/uv/install.ps1 | iex\"\n\n# Alternative: Install with pip (if you have Python)\npip install uv\n\n# Alternative: Install with pipx\npipx install uv\n```\n\n### Verify Installation\n\n```bash\nuv --version\n# Should output: uv 0.8.3 or newer\n```\n\n## 🚀 Quick Start\n\n### Create a New Python Project\n\n```bash\n# Create new project\nuv init my-agent\ncd my-agent\n\n# Project structure created:\n# ├── .python-version\n# ├── main.py\n# ├── pyproject.toml\n# └── README.md\n```\n\n### Add Dependencies\n\n```bash\n# Add production dependencies\nuv add requests pandas\n\n# Add development dependencies\nuv add --dev pytest black ruff\n\n# Add optional dependency groups\nuv add --optional ai openai anthropic\n```\n\n### Run Your Code\n\n```bash\n# Run Python script\nuv run python main.py\n\n# Run commands in project environment\nuv run pytest\nuv run black .\nuv run ruff check\n\n# Install and run tools temporarily\nuvx black .  # Run black without installing globally\n```\n\n## 📋 Essential Commands\n\n### Project Management\n\n```bash\n# Create new project\nuv init my-project              # Full project with structure\nuv init --bare my-project       # Minimal project (just pyproject.toml)\nuv init --app my-app            # Application with CLI entry point\nuv init --lib my-package        # Library package\n\n# Add to existing directory\ncd existing-project\nuv init --name my-project       # Initialize in current directory\n```\n\n### Dependency Management\n\n```bash\n# Add dependencies\nuv add package-name              # Latest version\nuv add \"package>=1.0,<2.0\"      # Version constraints\nuv add package --dev            # Development dependency\nuv add package --optional ai    # Optional dependency group\nuv add git+https://github.com/owner/repo.git  # Git dependency\n\n# Remove dependencies\nuv remove package-name\nuv remove package-name --dev\n\n# Upgrade dependencies\nuv add package-name --upgrade   # Upgrade specific package\nuv lock --upgrade               # Upgrade all packages\n```\n\n### Environment Management\n\n```bash\n# Create virtual environment\nuv venv                         # Create .venv in current directory\nuv venv --python 3.12          # Specific Python version\nuv venv my-env                  # Custom environment name\n\n# Synchronize environment\nuv sync                         # Install all dependencies\nuv sync --dev                   # Include dev dependencies\nuv sync --extra ai              # Include optional groups\nuv sync --frozen                # Use exact versions from lock file\n\n# Run commands in environment\nuv run python script.py         # Run Python\nuv run pytest                   # Run any command\nuv run --env-file .env python script.py  # With environment file\n```\n\n### Python Version Management\n\n```bash\n# Install Python versions\nuv python install 3.12          # Install Python 3.12\nuv python install 3.11 3.12     # Install multiple versions\nuv python install pypy@3.10     # Install PyPy\n\n# List Python versions\nuv python list                   # Available versions\nuv python list --installed       # Installed versions\n\n# Set Python version for project\nuv python pin 3.12              # Pin to specific version\necho \"3.12\" > .python-version    # Alternative method\n```\n\n### Lock Files and Reproducibility\n\n```bash\n# Generate/update lock file\nuv lock                          # Create/update uv.lock\nuv lock --upgrade                # Upgrade all dependencies\n\n# Export to other formats\nuv export --format requirements.txt > requirements.txt\nuv export --format requirements.txt --extra dev > dev-requirements.txt\n\n# Import from other formats\nuv add -r requirements.txt       # Add from requirements.txt\n```\n\n## 🛠️ Toolhouse Integration Patterns\n\n### Agent + Python Hybrid\n\n```bash\n# Setup for Toolhouse agent with Python processing\nuv init data-processor\ncd data-processor\n\n# Add Toolhouse-friendly dependencies\nuv add pandas numpy requests httpx\nuv add --dev pytest black ruff mypy\n\n# Create agent integration\ntouch agent.yaml  # Your Toolhouse agent config\nmkdir src/data_processor\n```\n\n### Project Structure for Agents\n\n```\nmy-agent/\n├── agent.yaml                  # Toolhouse agent configuration\n├── pyproject.toml              # UV Python project\n├── uv.lock                     # Dependency lock file\n├── .python-version             # Python version\n├── src/\n│   └── my_agent/\n│       ├── __init__.py\n│       ├── main.py             # Main Python logic\n│       ├── data_processor.py   # Data processing\n│       └── api_client.py       # API integrations\n├── tests/\n│   ├── test_main.py           # Python tests\n│   └── test_agent.py          # Agent integration tests\n└── scripts/\n    ├── test.sh                # Combined testing\n    └── deploy.sh              # Deployment\n```\n\n### Common Agent Patterns\n\n#### Data Processing Agent\n\n```bash\n# Setup\nuv add pandas numpy matplotlib seaborn\nuv add --dev jupyter notebook\n\n# pyproject.toml\n[project.optional-dependencies]\ndata = [\"pandas\", \"numpy\", \"matplotlib\", \"seaborn\"]\nnotebooks = [\"jupyter\", \"notebook\", \"ipykernel\"]\n```\n\n#### API Integration Agent\n\n```bash\n# Setup\nuv add requests httpx aiohttp\nuv add --dev responses httpx-mock pytest-asyncio\n\n# pyproject.toml\n[project.optional-dependencies]\napi = [\"requests\", \"httpx\", \"aiohttp\"]\ntesting = [\"responses\", \"httpx-mock\", \"pytest-asyncio\"]\n```\n\n#### AI/ML Agent\n\n```bash\n# Setup\nuv add openai anthropic langchain\nuv add --optional ml torch transformers scikit-learn\n\n# pyproject.toml\n[project.optional-dependencies]\nai = [\"openai\", \"anthropic\", \"langchain\"]\nml = [\"torch\", \"transformers\", \"scikit-learn\"]\n```\n\n## ⚙️ Configuration\n\n### pyproject.toml Configuration\n\n```toml\n[project]\nname = \"my-toolhouse-agent\"\nversion = \"0.1.0\"\ndescription = \"Toolhouse agent with Python integration\"\nreadme = \"README.md\"\nrequires-python = \">=3.9\"\ndependencies = [\n    \"requests>=2.31.0\",\n    \"pandas>=2.0.0\",\n]\n\n[project.optional-dependencies]\ndev = [\n    \"pytest>=7.0.0\",\n    \"black>=23.0.0\",\n    \"ruff>=0.1.0\",\n    \"mypy>=1.0.0\",\n]\ndata = [\n    \"numpy>=1.24.0\",\n    \"matplotlib>=3.7.0\",\n    \"seaborn>=0.12.0\",\n]\nai = [\n    \"openai>=1.0.0\",\n    \"anthropic>=0.7.0\",\n    \"langchain>=0.1.0\",\n]\n\n[project.scripts]\nmy-agent = \"my_agent.main:main\"\n\n[build-system]\nrequires = [\"hatchling\"]\nbuild-backend = \"hatchling.build\"\n\n# UV-specific configuration\n[tool.uv]\ndev-dependencies = [\n    \"pytest>=7.0.0\",\n    \"black>=23.0.0\",\n    \"ruff>=0.1.0\",\n]\n\n# Tool configurations\n[tool.black]\nline-length = 88\ntarget-version = ['py39']\n\n[tool.ruff]\nselect = [\"E\", \"F\", \"I\", \"N\", \"W\"]\nline-length = 88\ntarget-version = \"py39\"\n\n[tool.pytest.ini_options]\npythonpath = [\"src\"]\ntestpaths = [\"tests\"]\n```\n\n### Global UV Configuration\n\n```bash\n# UV configuration file: ~/.config/uv/config.toml\nmkdir -p ~/.config/uv\n\ncat > ~/.config/uv/config.toml << EOF\n[global]\nindex-url = \"https://pypi.org/simple\"\nextra-index-url = [\"https://download.pytorch.org/whl/cpu\"]\n\n[pip]\nno-deps = false\nbreak-system-packages = false\n\n[tool]\nenvironment = \"uv\"\nEOF\n```\n\n## 🔄 Migration Guide\n\n### From pip + requirements.txt\n\n```bash\n# Old workflow\npip install -r requirements.txt\npip install -r dev-requirements.txt\npython script.py\n\n# New UV workflow\nuv init --bare  # Creates pyproject.toml\nuv add -r requirements.txt\nuv add -r dev-requirements.txt --dev\nuv run python script.py\n```\n\n### From Poetry\n\n```bash\n# Poetry uses pyproject.toml - mostly compatible!\n# Copy [project] and [project.optional-dependencies] sections\n# Then:\nuv lock  # Generate uv.lock from pyproject.toml\nuv sync  # Install dependencies\n\n# Replace poetry commands:\n# poetry install → uv sync\n# poetry add pkg → uv add pkg\n# poetry run cmd → uv run cmd\n```\n\n### From Conda\n\n```bash\n# Extract package names from environment.yml\n# Add them with UV:\nuv add package1 package2 package3\n\n# For conda-specific packages, use conda-forge:\nuv add --index-url https://conda.anaconda.org/conda-forge package\n```\n\n## 🧪 Testing and Development\n\n### Test Setup\n\n```bash\n# Add testing dependencies\nuv add --dev pytest pytest-cov pytest-mock\n\n# For async testing\nuv add --dev pytest-asyncio\n\n# For web testing\nuv add --dev httpx-mock responses\n```\n\n### Running Tests\n\n```bash\n# Run tests\nuv run pytest\n\n# With coverage\nuv run pytest --cov=src --cov-report=html\n\n# Run specific tests\nuv run pytest tests/test_main.py::test_function\n\n# Watch mode (with pytest-watch)\nuv add --dev pytest-watch\nuv run ptw\n```\n\n### Code Quality\n\n```bash\n# Format code\nuv run black src tests\n\n# Lint code\nuv run ruff check src tests\n\n# Type checking\nuv run mypy src\n\n# All quality checks\nuv run black src tests && uv run ruff check src tests && uv run mypy src\n```\n\n## 🚀 Deployment Patterns\n\n### Docker with UV\n\n```dockerfile\n# Dockerfile\nFROM python:3.12-slim\n\n# Install UV\nCOPY --from=ghcr.io/astral-sh/uv:latest /uv /uvx /usr/local/bin/\n\n# Set working directory\nWORKDIR /app\n\n# Copy project files\nCOPY pyproject.toml uv.lock ./\nCOPY src/ ./src/\n\n# Install dependencies\nRUN uv sync --frozen --no-dev\n\n# Run application\nCMD [\"uv\", \"run\", \"python\", \"-m\", \"my_agent.main\"]\n```\n\n### GitHub Actions with UV\n\n```yaml\n# .github/workflows/test.yml\nname: Test Python Agent\n\non: [push, pull_request]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        python-version: [\"3.9\", \"3.10\", \"3.11\", \"3.12\"]\n    \n    steps:\n    - uses: actions/checkout@v4\n    \n    - name: Install UV\n      uses: astral-sh/setup-uv@v3\n      with:\n        version: \"latest\"\n    \n    - name: Set up Python\n      run: uv python install ${{ matrix.python-version }}\n    \n    - name: Install dependencies\n      run: uv sync --all-extras --dev\n    \n    - name: Run tests\n      run: uv run pytest\n    \n    - name: Run linting\n      run: uv run ruff check .\n    \n    - name: Run formatting check\n      run: uv run black --check .\n```\n\n### Production Environment\n\n```bash\n# Production deployment\nexport UV_CACHE_DIR=/tmp/uv-cache\nexport PYTHONPATH=/app/src\n\n# Install production dependencies only\nuv sync --frozen --no-dev\n\n# Run application\nuv run python -m my_agent.main\n```\n\n## 🔧 Advanced Features\n\n### Dependency Resolution\n\n```bash\n# Override dependency versions\nuv add 'package==1.0.0' --override\n\n# Use alternative resolution strategies\nuv lock --resolution lowest-direct  # Use lowest compatible versions\nuv lock --resolution highest        # Use highest compatible versions\n\n# Pre-release versions\nuv add package --prerelease allow\n```\n\n### Environment Variables\n\n```bash\n# UV environment variables\nexport UV_CACHE_DIR=\"/custom/cache/dir\"\nexport UV_INDEX_URL=\"https://custom-pypi.com/simple\"\nexport UV_EXTRA_INDEX_URL=\"https://additional-index.com/simple\"\nexport UV_NO_CACHE=1  # Disable caching\nexport UV_OFFLINE=1   # Offline mode\n```\n\n### Global Tools\n\n```bash\n# Install global tools\nuv tool install black\nuv tool install ruff\nuv tool install pytest\n\n# Run tools globally\nuv tool run black .\nuvx black .  # Shorthand\n\n# List installed tools\nuv tool list\n\n# Update tools\nuv tool upgrade black\n```\n\n## 🐛 Troubleshooting\n\n### Common Issues\n\n#### UV Not Found\n```bash\n# Add UV to PATH\nexport PATH=\"$HOME/.cargo/bin:$PATH\"\necho 'export PATH=\"$HOME/.cargo/bin:$PATH\"' >> ~/.bashrc\nsource ~/.bashrc\n```\n\n#### Permission Issues\n```bash\n# Fix ownership (Linux/macOS)\nsudo chown -R $USER ~/.local/share/uv\nsudo chown -R $USER ~/.cache/uv\n\n# Windows: Run as administrator or use User directory\n```\n\n#### Dependency Conflicts\n```bash\n# Clear cache and reinstall\nuv cache clean\nuv sync --reinstall\n\n# Use different resolution strategy\nuv lock --resolution lowest-direct\n```\n\n#### Python Version Issues\n```bash\n# Install required Python version\nuv python install 3.12\n\n# Check available versions\nuv python list\n\n# Pin project to specific version\nuv python pin 3.12\n```\n\n### Debug Mode\n\n```bash\n# Enable verbose output\nexport UV_VERBOSE=1\nuv sync\n\n# Show resolution details\nuv lock --verbose\n\n# Check UV configuration\nuv config\n```\n\n## 📚 UV vs Other Tools\n\n| Feature | UV | pip | poetry | conda |\n|---------|----|----|-----------|-------|\n| **Speed** | ⚡ 10-100x faster | Baseline | 2-5x slower | 5-10x slower |\n| **Lock files** | ✅ uv.lock | ❌ | ✅ poetry.lock | ✅ environment.yml |\n| **Python management** | ✅ Built-in | ❌ | ❌ | ✅ |\n| **Virtual envs** | ✅ Auto-managed | ❌ Manual | ✅ Auto-managed | ✅ Built-in |\n| **Standards compliance** | ✅ PEP 621 | ❌ | ✅ PEP 621 | ❌ |\n| **Tool installation** | ✅ uvx | ❌ | ❌ | ✅ |\n| **Cross-platform** | ✅ | ✅ | ✅ | ✅ |\n\n## 🎯 Best Practices for Toolhouse Agents\n\n### Project Organization\n\n```\ntoolhouse-agent/\n├── agent.yaml              # Toolhouse agent config\n├── pyproject.toml          # Python project config\n├── uv.lock                 # Dependency lock file\n├── .python-version         # Python version pin\n├── .env.example            # Environment template\n├── src/\n│   └── agent_name/\n│       ├── __init__.py\n│       ├── main.py         # Entry point\n│       ├── processors/     # Data processing modules\n│       ├── integrations/   # API clients\n│       └── utils/          # Utility functions\n├── tests/\n│   ├── test_main.py\n│   ├── test_processors.py\n│   └── test_integrations.py\n└── scripts/\n    ├── setup.sh            # Environment setup\n    ├── test.sh             # Run tests\n    └── deploy.sh           # Deploy agent\n```\n\n### Dependency Management\n\n```bash\n# Keep dependencies minimal in main project\nuv add only-essential-packages\n\n# Use optional groups for different features\nuv add --optional data pandas numpy\nuv add --optional ai openai anthropic\nuv add --optional web fastapi uvicorn\n\n# Use dev dependencies for tooling\nuv add --dev pytest black ruff mypy\n```\n\n### Development Workflow\n\n```bash\n# Daily workflow\nuv sync                     # Sync dependencies\nuv run python -m agent.main  # Run agent\nuv run pytest              # Test\nuv run black .              # Format\nuv run ruff check .         # Lint\n\n# Before commit\nuv lock                     # Update lock file\nuv export --format requirements.txt > requirements.txt  # For compatibility\n```\n\n## 🔗 Resources\n\n- [UV Official Documentation](https://docs.astral.sh/uv/)\n- [UV GitHub Repository](https://github.com/astral-sh/uv)\n- [Python Packaging Guide](https://packaging.python.org/)\n- [PEP 621 - Project Metadata](https://peps.python.org/pep-0621/)\n- [Toolhouse Python Integration Examples](../examples/)\n\n---\n\n**🐍 UV makes Python development for Toolhouse agents fast, reliable, and enjoyable!**"